resources:
  - name: test_1234
    type: GitRepo
    configuration:
      gitProvider: vijay
      path: vijayreddy1991/run
      branches:     
        include: ^(bugfix|feature)\/.*$

pipelines:
  - name: vijay_pipeline_ubuntu
    steps:
      - name: run_on_error
        type: Bash
        configuration: 
          environmentVariables:
            RT_VERSION: 7.46.3
            MASTER_KEY: "EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"
            JOIN_KEY: "EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"         
          inputSteps:          
            - name: pipelines_ubuntu
              status:
                - error
        execution:
          onFailure:
          onExecute: 
             - node --version
             - |
              curl -H "Authorization: Bearer $builder_api_token" "https://f1998.jfrog-pipelines.com/pipelines/api/v1/runResourceVersions?runIds=$run_id"
             # - if commit sha is 000000 then do something; else do something else
             - printenv
             - |
              if [ "$res_test_1234_commitSha" == "0000000000000000000000000000000000000000"]; then
                echo foo
              else
                echo bar
              fi
      - name: pipelines_ubuntu
        type: Bash
        configuration: 
          environmentVariables:
            RT_VERSION: 7.46.3
            MASTER_KEY: "EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"
            JOIN_KEY: "EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE"         
          inputResources:          
            - name: test_1234           
        execution:
          onFailure:
            - echo cheppura
            - add_run_variables "foobar=$run_id"
          onExecute: 
             - node --version 
             # - if commit sha is 000000 then do something; else do something else
             - |
              if [ "$res_test_1234_commitSha" == "0000000000000000000000000000000000000000"]; then
                echo foo
              else
                echo bar
              fi
           
